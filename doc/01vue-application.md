# Vue アプリケーションの作成

## アプリケーションのインスタンス

全ての Vue アプリケーションは`createApp`関数を使ってアプリケーションのインスタンスを新しく作成することから始まる。

```js
import { createApp } from "vue"; // vueからcreateAppクラスをインポートする

const app = createApp({
  // ルートコンポーネントのオプション
  // ルートコンポーネントについては次の節で学ぶ
});
app.mount("#app");
```

Nuxt では必要ない。

---

## ルートコンポーネント

`createApp`に渡しているオブジェクトは、実際にはコンポーネントである。

全てのアプリには 1 つの親コンポネ（ルートコンポーネント）と複数の子コンポネが必要。

小さなアプリでは 1 つの親コンポネだけで良いが、大規模なアプリの場合は 1 つの親コンポネと複数の子コンポネを持つ。

もし SFC を使用している場合は、他のファイルをルートコンポーネントとしてインポートする。

```js
import { createApp } from "vue";
import App from "./App.vue"; // SFCをルートコンポーネントとしてインポートしている

const app = createApp(App); // createAppの引数としてルートコンポーネントを渡している
app.mount("#app"); // HTMLのコンテナ要素のID属性を指定して、HTMLにバインドする
```

---

## アプリのマウント

アプリケーションのインスタンス（`createApp`）は、`.mount()`メソッドが呼ばれるまで何もレンダリングしない。

`.mount()`メソッドが呼ばれたら、引数で指定した DOM 要素（コンテナ要素）の中でアプリケーションがレンダリングされる。

なので、`.mount()`メソッドは、アプリの設定やアセットの登録が完了した後呼び出す必要がある。

また、アセット登録するメソッドとは異なり、`.mount()`の戻り値はルートコンポーネントインスタンスである

---

## DOM 内のルートコンポーネントテンプレート

ビルドなしで Vue を扱う場合、ルートコンポーネントのテンプレート（HTML のこと）をマウントコンテナ内に直接書くこともできる。

また、ルートコンポーネントに`template`オプションが無い場合、Vue はコンテナ（今回は`<div id="app"></div>`）内の`innerHTML`をテンプレートとして使用する

```html
<div id="app">
  <button @click="count++">{{ count }}</button>
</div>
```

```js
import { createApp } from "vue";

const app = createApp({
  // ロジックを直書きしている
  data() {
    return {
      count: 0,
    };
  },
});

app.mount("#app");
```

## アプリの設定

アプリケーションのインスタンス`app`は`.config`オブジェクトを持っており、そのオブジェクトでアプリケーションの設定を行うことができる。

```js
app.config.errorHandler = (err) => {
  // 子孫コンポーネントから発生したエラーをcatchするエラーハンドラの定義
  // エラーの制御を記述
};
```

また、アプリケーションのインスタンス`app`は、アプリ用のアセットを登録するいくつかのメソッドを用意している。

例えば、`.component()`メソッドで、特定のコンポネをアプリケーション内でどこでも利用できるようにしてくれる。

```js
app.component("TodoDeleteButton", TodoDeleteButton);
```

---

## 複数のアプリケーションのインスタンス

同一ページ内でも、アプリケーションのインスタンスは複数設定可能。

`createApp` API は同じページ内で複数の Vue アプリケーションを生成することができる（それぞれが独自の設定やグローバルアセットを備えたスコープを持っている）。

```js
const app1 = createApp({
  // ...
});
app1.mount("#container-1");

const app2 = createApp({
  // ...
});
app2.mount("#container-2");
```

---
